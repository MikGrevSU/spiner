<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Колесо фортуны</title>
<style>
body {
    margin:0;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    background:#111;
    color:#fff;
    font-family:Arial;
}

.container {
    text-align:center;
}

.stats {
    display:flex;
    justify-content:space-between;
    width:300px;
    margin:0 auto 10px;
    font-size:18px;
}

.wheel-wrapper {
    position:relative;
    width:300px;
    height:300px;
    margin:10px auto;
}

.wheel {
    width:100%;
    height:100%;
    border-radius:50%;
    border:5px solid #fff;
    position:relative;
    transition:transform 4s cubic-bezier(.17,.67,.12,1);
}

.arrow {
    position:absolute;
    top:-15px;
    left:50%;
    transform:translateX(-50%);
    width:0;
    height:0;
    border-left:10px solid transparent;
    border-right:10px solid transparent;
    border-bottom:20px solid red;
    z-index:10;
}

.sector {
    position:absolute;
    width:50%;
    height:50%;
    top:50%;
    left:50%;
    transform-origin:0% 0%;
    clip-path:polygon(0 0, 100% 0, 0 100%);
}

button {
    padding:10px 30px;
    font-size:18px;
    cursor:pointer;
}
</style>
</head>
<body>

<div class="container">
    <div class="stats">
        <div>Попытки: <span id="tries">0</span></div>
        <div>Баланс: <span id="balance">0</span></div>
    </div>

    <div class="wheel-wrapper">
        <div class="arrow"></div>
        <div class="wheel" id="wheel"></div>
    </div>

    <button onclick="spin()">Крутить</button>
    <h3 id="result"></h3>
</div>

<script>
const prizes = [
    { value: 5000, chance: 0.00001 },
    { value: 2000, chance: 0.0001 },
    { value: 1500, chance: 0.001 },
    { value: 1000, chance: 0.01 },
    { value: 500, chance: 0.1 },
    { value: 300, chance: 1 },
    { value: 200, chance: 3 },
    { value: 100, chance: 0.88888 },
    { value: 50, chance: 20 },
    { value: 0, chance: 75 }
];

const wheel = document.getElementById("wheel");
const result = document.getElementById("result");
const triesEl = document.getElementById("tries");
const balanceEl = document.getElementById("balance");

const angle = 360 / prizes.length;
let currentRotation = 0;
let tries = 0;
let balance = 0;
let spinning = false;

// Рисуем колесо
prizes.forEach((p, i) => {
    const s = document.createElement("div");
    s.className = "sector";
    s.style.background = `hsl(${i*36},70%,50%)`;
    s.style.transform = `rotate(${i*angle}deg) skewY(${90-angle}deg)`;
    s.innerHTML = `<span style="
        position:absolute;
        transform:skewY(${-(90-angle)}deg) rotate(${angle/2}deg);
        top:10px;
        left:10px;
        font-size:14px;
    ">${p.value}</span>`;
    wheel.appendChild(s);
});

// Выбор по вероятностям
function getPrizeIndex() {
    const r = Math.random() * 100;
    let sum = 0;

    for (let i = 0; i < prizes.length; i++) {
        sum += prizes[i].chance;
        if (r <= sum) return i;
    }
    return prizes.length - 1;
}

function spin() {
    if (spinning) return;
    spinning = true;

    tries++;
    triesEl.textContent = tries;

    const index = getPrizeIndex();
    const spins = 5;
    const targetAngle = 360 * spins + (360 - index * angle - angle / 2);

    currentRotation += targetAngle;
    wheel.style.transform = `rotate(${currentRotation}deg)`;

    setTimeout(() => {
        const win = prizes[index].value;
        balance += win;
        balanceEl.textContent = balance;
        result.innerText = `Выпало: ${win}`;
        spinning = false;
    }, 4000);
}
</script>

</body>
</html>
